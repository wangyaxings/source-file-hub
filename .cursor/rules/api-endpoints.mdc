---
description: API端点和服务指南
---

# API 端点和服务

## 基础URL
- **Web API**: `/api/v1/web`
- **公共API**: `/api/v1/public`
- **健康检查**: `/api/v1/health`

## 认证端点
- `GET /api/v1/web/auth/me` - 获取当前用户信息
- `GET /api/v1/web/auth/users` - 获取默认测试用户
- `POST /api/v1/web/auth/check-permission` - 检查单个权限
- `POST /api/v1/web/auth/check-permissions` - 检查多个权限

## 文件管理端点
- `POST /api/v1/web/upload` - 文件上传
- `GET /api/v1/web/files/list` - 文件列表（分页）
- `GET /api/v1/web/files/versions/{type}/{filename}` - 文件版本
- `GET /api/v1/web/files/{path}` - 文件下载
- `DELETE /api/v1/web/files/{id}/delete` - 软删除文件
- `POST /api/v1/web/files/{id}/restore` - 恢复文件
- `DELETE /api/v1/web/files/{id}/purge` - 永久删除

## 版本管理端点
- `GET /api/v1/web/versions/{type}/versions.json` - 版本列表
- `GET /api/v1/web/versions/{type}/{versionId}/manifest` - 版本清单
- `PUT /api/v1/web/versions/{type}/{versionId}/tags` - 更新版本标签

## 回收站端点
- `GET /api/v1/web/recycle-bin` - 获取回收站内容
- `DELETE /api/v1/web/recycle-bin/clear` - 清空回收站

## 管理端点
- `GET /api/v1/web/admin/users` - 用户管理
- `POST /api/v1/web/admin/users` - 创建用户
- `PATCH /api/v1/web/admin/users/{id}` - 更新用户
- `POST /api/v1/web/admin/users/{id}/approve` - 批准用户
- `POST /api/v1/web/admin/users/{id}/suspend` - 暂停用户

## 包管理端点
- `GET /api/v1/web/packages` - 包列表
- `PATCH /api/v1/web/packages/{id}/remark` - 更新包备注

## 公共API端点（API Key认证）
- `POST /api/v1/public/upload/assets-zip` - 上传资源包
- `POST /api/v1/public/upload/others-zip` - 上传其他包

## 响应格式
所有API响应使用统一格式：
```json
{
  "success": true,
  "message": "操作成功",
  "data": {},
  "error": "错误信息",
  "code": "ERROR_CODE",
  "details": {}
}
```

## 错误代码
- `VALIDATION_ERROR` - 验证错误
- `UNAUTHORIZED` - 未授权
- `FORBIDDEN` - 禁止访问
- `NOT_FOUND` - 资源不存在
- `INTERNAL_ERROR` - 内部错误